{"version":3,"sources":["webpack:///./src/components/hologram.js","webpack:///./shaders/vertex.glsl","webpack:///./src/App.css","webpack:///./shaders/fragment.glsl","webpack:///./src/index.css","webpack:///./src/index.js","webpack:///./src/App.js"],"names":["AFRAME","registerComponent","schema","color","type","init","previousMaterials","material","THREE","ShaderMaterial","transparent","polygonOffset","polygonOffsetFactor","uniforms","time","value","centerX","centerZ","vertexShader","fragmentShader","el","addEventListener","update","clock","Clock","centerY","mesh","getObject3D","traverse","node","isMesh","isGLTFSpecularGlossinessMaterial","onBeforeRender","id","geometry","clearGroups","addGroup","Infinity","camera","document","querySelector","console","log","object3D","position","x","z","remove","removeEventListener","tick","t","getElapsedTime","render","lock","App","props","componentDidMount","body","onkeyup","e","keyCode","els","getElementById","i","length","setAttribute","audio","Audio","play","setTimeout","removeAttribute","React","Component"],"mappings":"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","file":"app.7f719368.js","sourcesContent":["import 'aframe';\nimport vertexShader from 'raw-loader!glslify-loader!../../shaders/vertex.glsl'\nimport fragmentShader from 'raw-loader!glslify-loader!../../shaders/fragment.glsl'\n\n\n\nAFRAME.registerComponent('hologram', {\n  schema: {\n    color: {\n      type: 'color'\n    }\n  },\n\n  init: function () {\n    this.previousMaterials = {}\n    this.material  = new THREE.ShaderMaterial({\n      transparent: true,\n      polygonOffset: true,\n      polygonOffsetFactor: - 10,\n      uniforms: {\n        time: { value: 0.0 },\n        centerX: { value: 0.0 },\n        centerZ: { value: 0.0 }\n      },\n      vertexShader,\n      fragmentShader\n    })\n\n    this.el.addEventListener('model-loaded', () => { this.update() })\n    this.clock = new THREE.Clock()\n    //this.clock.start()\n    this.centerX = 0\n    this.centerY = 0\n  },\n\n  update: function () {\n    const mesh = this.el.getObject3D('mesh')\n\n\n\n    if (mesh) {\n      mesh.traverse(node => {\n        if (node.isMesh) {\n          if (node.material.isGLTFSpecularGlossinessMaterial) {\n            node.onBeforeRender = function () {}\n          }\n          this.previousMaterials[node.id] = node.material\n\n          node.geometry.clearGroups();\n          node.geometry.addGroup( 0, Infinity, 0 );\n          node.geometry.addGroup( 0, Infinity, 1 );\n\n          node.material = [node.material, this.material]\n        }\n      })\n    }\n\n    var camera = document.querySelector('#camera')\n    console.log(camera.object3D.position)\n    this.centerX = camera.object3D.position.x\n    this.centerZ = camera.object3D.position.z\n\n  },\n\n\n  remove: function () {\n    const mesh = this.el.getObject3D('mesh')\n    if (mesh) {\n      mesh.traverse(node => {\n        if (node.isMesh) {\n          node.material = this.previousMaterials[node.id]\n        }\n      })\n    }\n\n    this.el.removeEventListener('model-loaded', () => { this.update() })\n  },\n\n  tick: function (t) {\n\n\n\n\n\n\n    this.material.uniforms.time.value = this.clock.getElapsedTime();\n    this.material.uniforms.centerX.value = this.centerX\n    this.material.uniforms.centerZ.value = this.centerZ\n  }\n\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/hologram.js","module.exports = \"#define GLSLIFY 1\\nvarying vec3 vPosition;\\nvarying vec3 vNormal;\\nvarying vec2 vUv;\\nvarying float x;\\nvarying float y;\\nvarying float z;\\nvarying float sweep;\\nvarying float distToCamera;\\n\\nvoid main() {\\n  vUv = uv;\\n  vNormal = normal;\\n  vPosition = position;\\n\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n  vec4 worldPosition = modelMatrix * vec4(position, 1.0);\\n  y = worldPosition.y;\\n  x = worldPosition.x;\\n  z = worldPosition.z;\\n\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/raw-loader!./node_modules/glslify-loader!./shaders/vertex.glsl\n// module id = PupI\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.css\n// module id = Ue/Q\n// module chunks = 1","module.exports = \"#define GLSLIFY 1\\n\\nuniform vec3 color;\\nuniform float time;\\nuniform float centerX;\\nuniform float centerZ;\\n\\nvarying vec3 vPosition;\\nvarying vec3 vNormal;\\nvarying vec2 vUv;\\nvarying vec2 vUv2;\\n\\nfloat scanPeriod = 60.0;\\nfloat scan = 0.0;\\nfloat speed = 0.5;\\nfloat falloff = 6.0;\\nfloat sweepFadOutDelay = 3.0;\\nfloat effectFadeOutDelay = 5.0;\\nfloat edgeSpeed = 60.0;\\n\\nvarying float x;\\nvarying float y;\\nvarying float z;\\n\\nvarying float sweep;\\nvarying float distToCamera;\\nuniform vec3 vertexPosition;\\n\\nvoid main() {\\n\\n  float yy = pow(fract(y - time * speed), falloff);\\n  float xx = pow(fract(x - time * speed), falloff);\\n  float zz = pow(fract(z - time * speed), falloff);\\n\\n  float sum = pow(x - centerX, 2.0) + pow(z - centerZ, 2.0);\\n\\n\\n  float fadeOut = pow((time - sweepFadOutDelay) * edgeSpeed, 2.0); //2 second delay on fadeout\\n  float maxedge = min(pow(time * edgeSpeed, 2.0), 4000.0);\\n\\n  float val;\\n\\n  //hard edge at max range, nothing beyond that\\n  if (maxedge < sum) {\\n    val = 0.0;\\n  } else {\\n\\n    if((time - sweepFadOutDelay) < 0.0) {\\n      val = 1.0;\\n    } else {\\n\\n      if (time > effectFadeOutDelay) { //after 4 seconds, fade the wole thing\\n        val = (sum/fadeOut)/(time - (effectFadeOutDelay - 1.0));\\n      } else {\\n        val = sum/fadeOut;\\n      }\\n\\n    }\\n  }\\n\\n  gl_FragColor = vec4(\\n    max(zz,max(yy,xx)),\\n    0,\\n    0,\\n    val\\n   );\\n\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/raw-loader!./node_modules/glslify-loader!./shaders/fragment.glsl\n// module id = W4oM\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.css\n// module id = cilB\n// module chunks = 1","import './index.css'\n\nimport React from 'react'\nimport {render} from 'react-dom'\n\nimport App from './App'\n\nrender(<App/>, document.querySelector('#app'))\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import './App.css'\nimport React, {Component} from 'react'\nimport 'aframe'\nimport 'aframe-animation-component'\nimport 'aframe-particle-system-component'\nimport 'babel-polyfill'\n\nimport {Entity, Scene} from 'aframe-react'\n\nimport hologram from './components/hologram'\n//import './components/infinite-ocean'\n\nimport 'aframe-extras.ocean'\n\nimport path from 'path'\n\n\nlet lock = false\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n\n    document.body.onkeyup = e => {\n      if (e.keyCode == 32) {\n        console.log(lock)\n        if (lock) return\n\n        let els = [\n          document.getElementById(\"land-model\"),\n          document.getElementById(\"lizard-model\")\n        ]\n\n        for( var i = 0; i < els.length; i++) {\n          els[i].setAttribute(\"hologram\", '')\n        }\n\n        var audio = new Audio('./audio/ping.mp3')\n        audio.play()\n        lock = true\n        console.log(lock)\n\n        setTimeout(() => {\n          lock = false\n          for( var i = 0; i < els.length; i++) {\n            els[i].removeAttribute(\"hologram\")\n          }\n        }, 7000)\n      }\n    }\n  }\n\n\n  render () {\n\n    //<a-scene fog=\"type: linear; color: #000; far: 50;\">\n    //\n    //<a-gltf-model id=\"lizard-model\" src=\"#lizard\" position=\"-15 0 -30\" scale=\"3.0, 3.0, 3.0\"></a-gltf-model>\n\n\n    return (\n      <a-scene background=\"color:#2D9CDB; \" fog=\"type: linear; color: #2D9CDB; far:30; \" stats keyboard-shortcuts vr-mode-ui>\n        <a-assets>\n          <a-asset-item id=\"lizard\" src='./models/lizard/scene.gltf' ></a-asset-item>\n          <a-asset-item id=\"octopolice\" src=\"./models/octopolice/scene.gltf\"></a-asset-item>\n\n          <img id=\"skybox\" src=\"./img/skybox1.png\"></img>\n        </a-assets>\n\n\n\n        <a-sky material=\"fog: false\" position=\"0 0 0\" src=\"#skybox\" radius=\"250\" theta-start=\"0\" theta-length=\"90\"></a-sky>\n\n\n        <a-entity position=\"0 0 0\" color=\"#2D9CDB\" rotation=\"180 180 0\">\n          <a-ocean width=\"500\" depth=\"500\" density=\"400\">\n            <a-animation attribute=\"visible\" delay=\"25000\" to=\"true\"></a-animation>\n          </a-ocean>\n        </a-entity>\n\n        <a-entity position=\"0 0 0\" color=\"#2D9CDB\" rotation=\"180 0 0\">\n          <a-ocean width=\"500\" depth=\"500\" density=\"400\">\n            <a-animation attribute=\"visible\" delay=\"25000\" to=\"true\"></a-animation>\n          </a-ocean>\n        </a-entity>\n\n\n\n\n\n        <a-plane id=\"seafloorCoral\" position=\"0 -5 0\" rotation=\"-90 0 0\" width=\"4\" height=\"4\" color=\"#d9d0ae\" ></a-plane>\n\n\n        <a-light type=\"ambient\" intensity=\".1\" color=\"#fff\" position=\"0 100 0\"></a-light>\n        <a-entity position=\"0 -3 5\">\n\n          <a-camera id=\"camera\" wasd-controls=\"fly:true; acceleration:150; easing:15;\">\n              <a-light type=\"point\" intensity=\"2\" color=\"#fff\"></a-light>\n          </a-camera>\n        </a-entity>\n      </a-scene>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js"],"sourceRoot":""}